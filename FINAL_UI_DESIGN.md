# é…æ–¹æ­¥éª¤UIæœ€ç»ˆè®¾è®¡

## âœ… è®¾è®¡å®Œæˆ

ä¿ç•™äº†åŸæœ‰çš„ç¾è§‚UIè®¾è®¡ï¼ŒåŒæ—¶å®Œå…¨ç¬¦åˆAPIæ–‡æ¡£çš„æ•°æ®æ ¼å¼è¦æ±‚ã€‚

---

## ğŸ¨ UIç‰¹æ€§

### 1. æ™ºèƒ½æ­¥éª¤ç±»å‹è¯†åˆ«

**æ™®é€šæ­¥éª¤ï¼ˆææ–™/æ“ä½œï¼‰**:
- æ˜¾ç¤ºæ•°é‡è¾“å…¥æ¡†ï¼ˆæ•°å­—ç±»å‹ï¼‰
- ç”¨äºè¾“å…¥å…·ä½“æ•°é‡ï¼Œå¦‚ï¼š200, 8, 30

**è®¾å¤‡æ­¥éª¤**:
- æ˜¾ç¤ºææ–™å¼•ç”¨é€‰æ‹©å™¨ï¼ˆå¤šé€‰ä¸‹æ‹‰æ¡†ï¼‰
- å¯ä»¥é€‰æ‹©å‰é¢çš„æ­¥éª¤ä½œä¸ºææ–™
- è‡ªåŠ¨ç”ŸæˆåŸæ–™ä¿¡æ¯å­—ç¬¦ä¸²

### 2. è®¾å¤‡æ­¥éª¤UI

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”§ è®¾å¤‡æ­¥éª¤ - é€‰æ‹©è¦å¤„ç†çš„ææ–™          â”‚
â”‚                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ â˜‘ æ­¥éª¤1: èŒ¶ (200)                   â”‚ â”‚
â”‚ â”‚ â˜‘ æ­¥éª¤2: ç‰›å¥¶ (100)                 â”‚ â”‚
â”‚ â”‚ â˜‘ æ­¥éª¤3: ç³– (30)                    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚ ğŸ’¡ é€‰æ‹©çš„ææ–™ä¼šè‡ªåŠ¨å¡«å…¥åŸæ–™ä¿¡æ¯å­—æ®µ     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. è‡ªåŠ¨ç”ŸæˆåŸæ–™ä¿¡æ¯

å½“ç”¨æˆ·åœ¨è®¾å¤‡æ­¥éª¤ä¸­é€‰æ‹©ææ–™æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ç”Ÿæˆ`ingredients`å­—ç¬¦ä¸²ï¼š

```
æ­¥éª¤1: èŒ¶ 200, æ­¥éª¤2: ç‰›å¥¶ 100, æ­¥éª¤3: ç³– 30
```

---

## ğŸ”§ æŠ€æœ¯å®ç°

### 1. ä¸´æ—¶å­—æ®µ

ä½¿ç”¨`_selectedSteps`ä¸´æ—¶å­—æ®µå­˜å‚¨UIé€‰æ‹©çŠ¶æ€ï¼š

```typescript
interface RecipeStep {
  // APIå­—æ®µ
  stepTypeId: string
  amount?: number
  ingredients?: string
  operation?: string
  
  // ä¸´æ—¶å­—æ®µï¼ˆä»…ç”¨äºUIï¼Œä¸å‘é€åˆ°åç«¯ï¼‰
  _selectedSteps?: number[]
}
```

### 2. è‡ªåŠ¨è½¬æ¢

é€‰æ‹©æ­¥éª¤æ—¶è‡ªåŠ¨ç”Ÿæˆ`ingredients`å­—ç¬¦ä¸²ï¼š

```typescript
onChange={(selectedSteps: number[]) => {
  // æ›´æ–°ä¸´æ—¶é€‰æ‹©
  updateStep(index, '_selectedSteps', selectedSteps)
  
  // ç”Ÿæˆingredientså­—ç¬¦ä¸²
  const ingredientsText = selectedSteps.map(stepNum => {
    const refStep = steps[stepNum - 1]
    const refType = stepTypes.find(t => t.id === refStep?.stepTypeId)
    return `æ­¥éª¤${stepNum}: ${refType?.name} ${refStep?.amount || ''}`
  }).join(', ')
  
  updateStep(index, 'ingredients', ingredientsText)
}}
```

### 3. æäº¤æ—¶æ¸…ç†

å‘é€åˆ°åç«¯æ—¶ï¼Œè‡ªåŠ¨è¿‡æ»¤æ‰ä¸´æ—¶å­—æ®µï¼š

```typescript
steps: steps.map((step, index) => {
  const stepData: any = {
    stepTypeId: step.stepTypeId,
    sortOrder: index,
    stepNumber: index + 1
  }
  
  if (step.amount) stepData.amount = step.amount
  if (step.ingredients) stepData.ingredients = step.ingredients
  if (step.operation) stepData.operation = step.operation
  
  // æ³¨æ„ï¼šä¸ä¼ é€’_selectedStepsä¸´æ—¶å­—æ®µ
  
  return stepData
})
```

---

## ğŸ“‹ å®Œæ•´è¡¨å•å­—æ®µ

### æ™®é€šæ­¥éª¤

1. **æ­¥éª¤ç±»å‹** (å¿…å¡«) - ä¸‹æ‹‰é€‰æ‹©
2. **æ•°é‡** - æ•°å­—è¾“å…¥
3. **åŸæ–™ä¿¡æ¯** - æ–‡æœ¬åŸŸï¼ˆæ‰‹åŠ¨è¾“å…¥ï¼‰
4. **æ“ä½œè¯´æ˜** - æ–‡æœ¬åŸŸ
5. **è€—æ—¶** - æ•°å­—è¾“å…¥ï¼ˆç§’ï¼‰

### è®¾å¤‡æ­¥éª¤

1. **æ­¥éª¤ç±»å‹** (å¿…å¡«) - ä¸‹æ‹‰é€‰æ‹©
2. **ææ–™å¼•ç”¨** - å¤šé€‰ä¸‹æ‹‰æ¡†ï¼ˆè‡ªåŠ¨ç”ŸæˆåŸæ–™ä¿¡æ¯ï¼‰
3. **åŸæ–™ä¿¡æ¯** - æ–‡æœ¬åŸŸï¼ˆè‡ªåŠ¨å¡«å……ï¼Œå¯æ‰‹åŠ¨ä¿®æ”¹ï¼‰
4. **æ“ä½œè¯´æ˜** - æ–‡æœ¬åŸŸ
5. **è€—æ—¶** - æ•°å­—è¾“å…¥ï¼ˆç§’ï¼‰

---

## ğŸ¯ ç”¨æˆ·ä½“éªŒ

### ä¼˜åŠ¿

1. **ç›´è§‚é€‰æ‹©** âœ…
   - è®¾å¤‡æ­¥éª¤å¯ä»¥ç›´è§‚åœ°é€‰æ‹©è¦å¤„ç†çš„ææ–™
   - ä¸éœ€è¦æ‰‹åŠ¨è¾“å…¥æ­¥éª¤ç¼–å·

2. **è‡ªåŠ¨å¡«å……** âœ…
   - é€‰æ‹©ææ–™åè‡ªåŠ¨ç”ŸæˆåŸæ–™ä¿¡æ¯
   - å‡å°‘æ‰‹åŠ¨è¾“å…¥é”™è¯¯

3. **çµæ´»ä¿®æ”¹** âœ…
   - è‡ªåŠ¨ç”Ÿæˆçš„åŸæ–™ä¿¡æ¯å¯ä»¥æ‰‹åŠ¨ä¿®æ”¹
   - æ»¡è¶³ç‰¹æ®Šéœ€æ±‚

4. **æ¸…æ™°æç¤º** âœ…
   - æ¯ä¸ªåŠŸèƒ½éƒ½æœ‰è¯´æ˜
   - ç”¨æˆ·çŸ¥é“å“ªäº›å­—æ®µä¼šè‡ªåŠ¨ç”Ÿæˆ

---

## ğŸ“¤ æ•°æ®æµç¨‹

### åˆ›å»ºé…æ–¹æµç¨‹

```
1. ç”¨æˆ·æ·»åŠ æ­¥éª¤
   â†“
2. é€‰æ‹©æ­¥éª¤ç±»å‹
   â†“
3a. æ™®é€šæ­¥éª¤ï¼šè¾“å…¥æ•°é‡
3b. è®¾å¤‡æ­¥éª¤ï¼šé€‰æ‹©ææ–™ï¼ˆè‡ªåŠ¨ç”Ÿæˆingredientsï¼‰
   â†“
4. è¾“å…¥æ“ä½œè¯´æ˜ã€è€—æ—¶ç­‰
   â†“
5. ç‚¹å‡»ä¿å­˜
   â†“
6. å‰ç«¯æ¸…ç†ä¸´æ—¶å­—æ®µ
   â†“
7. å‘é€åˆ°åç«¯
   â†“
8. åç«¯è‡ªåŠ¨ç”ŸæˆprintCode
   â†“
9. è¿”å›å®Œæ•´æ•°æ®
```

### å‘é€ç¤ºä¾‹

**å‰ç«¯å‘é€**:
```json
{
  "steps": [
    {
      "stepTypeId": "tea-uuid",
      "amount": 200,
      "sortOrder": 0,
      "stepNumber": 1
    },
    {
      "stepTypeId": "blender-uuid",
      "ingredients": "æ­¥éª¤1: èŒ¶ 200, æ­¥éª¤2: ç‰›å¥¶ 100",
      "operation": "æ…æ‹Œå‡åŒ€",
      "duration": 30,
      "sortOrder": 1,
      "stepNumber": 2
    }
  ]
}
```

**åç«¯è¿”å›**:
```json
{
  "steps": [
    {
      "stepNumber": 1,
      "stepTypeId": "tea-uuid",
      "amount": 200,
      "printCode": "T200"  // âœ… åç«¯è‡ªåŠ¨ç”Ÿæˆ
    },
    {
      "stepNumber": 2,
      "stepTypeId": "blender-uuid",
      "ingredients": "æ­¥éª¤1: èŒ¶ 200, æ­¥éª¤2: ç‰›å¥¶ 100",
      "operation": "æ…æ‹Œå‡åŒ€",
      "duration": 30,
      "printCode": "[T200+M100]"  // âœ… åç«¯è‡ªåŠ¨ç”Ÿæˆ
    }
  ]
}
```

---

## ğŸ‰ å®ŒæˆçŠ¶æ€

- âœ… UIè®¾è®¡ç¾è§‚
- âœ… ç¬¦åˆAPIæ–‡æ¡£
- âœ… ç”¨æˆ·ä½“éªŒè‰¯å¥½
- âœ… æ•°æ®æ ¼å¼æ­£ç¡®
- âœ… è‡ªåŠ¨è½¬æ¢å¤„ç†
- âœ… ä¸´æ—¶å­—æ®µæ¸…ç†

---

**çŠ¶æ€**: âœ… è®¾è®¡å®Œæˆ  
**æµ‹è¯•**: å¾…æµ‹è¯•  
**ä¸‹ä¸€æ­¥**: åˆ·æ–°æµè§ˆå™¨æµ‹è¯•åŠŸèƒ½
